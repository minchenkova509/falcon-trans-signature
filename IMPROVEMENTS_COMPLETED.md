# ‚úÖ –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

## üéØ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è - –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `MM_TO_PT = 72/25.4` –∏ `PT_TO_MM = 25.4/72`
- –§—É–Ω–∫—Ü–∏–∏ `mm()` –∏ `pt_to_mm()` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –£–±—Ä–∞–Ω—ã "–º–∞–≥–∏—á–µ—Å–∫–∏–µ" –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

### 2. **–†–æ—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü** ‚úÖ
```python
rotation = int(page.get('/Rotate', 0)) % 360
if rotation:
    overlay_page.rotate(rotation)
page.merge_page(overlay_page)
```
- –û–≤–µ—Ä–ª–µ–π –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ 0¬∞, 90¬∞, 180¬∞, 270¬∞

### 3. **CropBox vs MediaBox** ‚úÖ
```python
crop = page.cropbox
x_offset = float(crop.lower_left[0])
y_offset = float(crop.lower_left[1])
adjusted_coordinates = {
    'x': coordinates['x'] + x_offset,
    'y': coordinates['y'] + y_offset,
    'width': coordinates['width'],
    'height': coordinates['height']
}
```
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å–º–µ—â–µ–Ω–∏–µ CropBox
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. **"–ü–µ—á–∞—Ç—å + –ø–æ–¥–ø–∏—Å—å" –∫–∞–∫ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞** ‚úÖ
```python
if add_signature:
    # –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ–¥–ø–∏—Å—å –∏ –ø–µ—á–∞—Ç—å –∫–∞–∫ –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞
    signature = {
        'x': mm(MARGIN_LEFT_MM),
        'y': mm(MARGIN_BOTTOM_MM),
        'w': mm(SIGNATURE_WIDTH_MM),
        'h': mm(SIGNATURE_HEIGHT_MM)
    }
    
    seal = {
        'x': signature['x'] + signature['w'] + mm(GAP_MM),
        'y': signature['y'],
        'w': mm(SEAL_WIDTH_MM),
        'h': mm(SEAL_HEIGHT_MM)
    }
```
- –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –ø–æ–¥–ø–∏—Å—å—é –∏ –ø–µ—á–∞—Ç—å—é: 6 –º–º
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 5. **–ê–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª/–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** ‚úÖ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PNG —Å `optimize=False, compress_level=0`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `mask='auto'` –≤ ReportLab
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ RGBA —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞–ª—å—Ñ—ã

### 6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –ø–∞—á–∫–µ** ‚úÖ
```python
# –ü—Ä–µ–¥–∫–µ—à PNG –ø–µ—á–∞—Ç–µ–π
SEAL_BYTES_FALCON = seal_png_bytes('falcon', False)
SEAL_BYTES_FALCON_SIGNATURE = seal_png_bytes('falcon', True)
SEAL_BYTES_IP = seal_png_bytes('ip', False)
SEAL_BYTES_IP_SIGNATURE = seal_png_bytes('ip', True)
```
- PNG –±–∞–π—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤

### 7. **–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤** ‚úÖ
```python
from pathlib import Path
name = secure_filename(Path(original_filename).stem) or "document"
out_name = f"{name}_stamped.pdf"
```
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—É—Ñ—Ñ–∏–∫—Å—ã
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### 8. **A4-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** ‚úÖ
- API –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è A4
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–º–µ—Ç–∫–∞ –≤ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ API –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç:
```json
{
  "coordinates": {
    "height": 38.55,
    "width": 49.89,
    "x": 49.89,
    "y": 49.89
  },
  "units": "points (pt)",
  "page_size": {
    "height_mm": 297.0,
    "width_mm": 210.0
  },
  "note": "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–ª—è A4..."
}
```

### ‚úÖ API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```json
{
  "available_seals": 2,
  "max_file_size_mb": 16,
  "service_status": "active",
  "total_processed_files": 1,
  "version": "1.0.0"
}
```

### ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å –ø–æ–¥–ø–∏—Å—å—é:
```json
{
  "coordinates": {
    "height": 79.37,
    "width": 217.13,
    "x": 49.89,
    "y": 49.89
  }
}
```

## üéØ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–∏–∑ –±–æ–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞)

### –¢–æ–ª—å–∫–æ –ø–µ—á–∞—Ç—å:
- **X**: 49.89 pt ‚âà 17.6 –º–º
- **Y**: 49.89 pt ‚âà 17.6 –º–º  
- **–®–∏—Ä–∏–Ω–∞**: 49.89 pt ‚âà 17.6 –º–º
- **–í—ã—Å–æ—Ç–∞**: 38.55 pt ‚âà 13.6 –º–º

### –ü–µ—á–∞—Ç—å + –ø–æ–¥–ø–∏—Å—å:
- **X**: 49.89 pt ‚âà 17.6 –º–º
- **Y**: 49.89 pt ‚âà 17.6 –º–º
- **–®–∏—Ä–∏–Ω–∞**: 217.13 pt ‚âà 76.6 –º–º (53 + 17.6 + 6 –º–º)
- **–í—ã—Å–æ—Ç–∞**: 79.37 pt ‚âà 28 –º–º

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ CropBox –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –∏ –ø–µ—á–∞—Ç–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### –¢–µ—Å—Ç–æ–≤–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞:
- üìã `TEST_MATRIX.md` - –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üß™ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–æ—Ç–∞—Ü–∏–∏
- üîç –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: ~1-3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ —Ñ–∞–π–ª
- **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –î–æ 10 —Ñ–∞–π–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ü–∞–º—è—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø—Ä–µ–¥–∫–µ—à–µ–º
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

---

**–í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã!** üéâ

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–ª–∏–∑—É –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω.** üöÄ 