# üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—á–∞—Ç–∏

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø–µ—á–∞—Ç–∏ –Ω–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–µ –∏–∑ `pdf_processor.py`.

## üñºÔ∏è –†–∞–∑–º–µ—Ä –ø–µ—á–∞—Ç–∏

### –≠–≤–æ–ª—é—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞:
- **–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ**: 120 √ó 80 –ø–∏–∫—Å–µ–ª–µ–π
- **–£–≤–µ–ª–∏—á–µ–Ω –¥–æ**: 148 √ó 108 –ø–∏–∫—Å–µ–ª–µ–π  
- **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 176 √ó 136 –ø–∏–∫—Å–µ–ª–µ–π (—É–≤–µ–ª–∏—á–µ–Ω –µ—â–µ –Ω–∞ 28px –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```python
max_width = 176  # –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑ pdf_processor.py
max_height = 136  # –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑ pdf_processor.py
```

## üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–∑–∏—Ü–∏–∏

#### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞:
```python
signature_patterns = ['–ø–æ–¥–ø–∏—Å—å', 'podpis', '–ø–æ–¥–ø–∏', 'signature']
signature_keywords = ['–ø–æ–¥–ø–∏—Å', '–¥–∏—Ä–µ–∫—Ç–æ—Ä', '–∑–∞–∏–∫–∏–Ω']
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
def find_signature_position(page_text):
    # –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
    for pattern in signature_patterns + signature_keywords:
        if pattern.lower() in page_text.lower():
            return 100, 367  # x=100, y=367 (1.5—Å–º –Ω–∏–∂–µ —Ç–µ–∫—Å—Ç–∞)
    
    return 50, 210  # –†–µ–∑–µ—Ä–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
```

### 2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

- **X-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞**: –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
- **Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞**: –æ—Ç –ù–ò–ó–ê —Å—Ç—Ä–∞–Ω–∏—Ü—ã (reportlab –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
- **–û—Ç—Å—Ç—É–ø –≤–Ω–∏–∑**: 42 –ø–∏–∫—Å–µ–ª—è (‚âà 1.5 —Å–º) –Ω–∏–∂–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ "–ø–æ–¥–ø–∏—Å—å"

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏—è

1. **–ü–æ–∏—Å–∫ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é**: –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ "–ø–æ–¥–ø–∏—Å—å", –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–∞–º—ã–π –ª–µ–≤—ã–π
2. **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞**: –û—Å–Ω–æ–≤–Ω—ã–µ + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
3. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è**: x=50, y=25% –≤—ã—Å–æ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

- **–ü—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ "–ø–æ–¥–ø–∏—Å—å"**: x=100, y=367 (1.5—Å–º –Ω–∏–∂–µ —Ç–µ–∫—Å—Ç–∞)
- **–†–µ–∑–µ—Ä–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è**: x=50, y=210 (–ø—Ä–∏ –≤—ã—Å–æ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã 842px)
- **–õ–µ–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã–±–∏—Ä–∞–µ—Ç—Å—è "–ø–æ–¥–ø–∏—Å—å" —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º x

## üé® –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–π:
```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏
width_ratio = max_width / img_width    # 176 / —à–∏—Ä–∏–Ω–∞_–æ—Ä–∏–≥–∏–Ω–∞–ª–∞
height_ratio = max_height / img_height # 136 / –≤—ã—Å–æ—Ç–∞_–æ—Ä–∏–≥–∏–Ω–∞–ª–∞
scale_factor = min(width_ratio, height_ratio) # –ú–µ–Ω—å—à–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
```

### –ü—Ä–æ—Ü–µ—Å—Å –Ω–∞–ª–æ–∂–µ–Ω–∏—è:
```python
c.drawImage(
    str(signature_path),
    x_position, y_position,           # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
    width=new_width, height=new_height, # –†–∞–∑–º–µ—Ä 176√ó136
    mask='auto'                       # –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
)
```

## üìÑ –§–∞–π–ª –ø–µ—á–∞—Ç–∏

- **–ü—É—Ç—å**: `static/images/falcon_seal.png`
- **–§–æ—Ä–º–∞—Ç**: PNG —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
- **–ú–∞—Å–∫–∞**: `mask='auto'` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: `optimize=True` –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

## üîß –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```python
last_page = reader.pages[-1]
page_text = last_page.extract_text()
```

### 2. –ü–æ–∏—Å–∫ –ø–æ–∑–∏—Ü–∏–∏
```python
x_position, y_position = find_signature_position(page_text)
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü
```python
if y_position > page_height - signature_height:
    y_position = page_height * 0.25  # 25% –æ—Ç –≤—ã—Å–æ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

### 4. –ù–∞–ª–æ–∂–µ–Ω–∏–µ –ø–µ—á–∞—Ç–∏
```python
can.drawImage(signature_path, x_position, y_position, 
             width=signature_width, height=signature_height,
             mask='auto')
```

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–†–∞–∑–º–µ—Ä –ø–µ—á–∞—Ç–∏**: 176√ó136 –ø–∏–∫—Å–µ–ª–µ–π
- **–§–æ—Ä–º–∞—Ç**: PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ + —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
- **–†–∞–∑–º–µ—â–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: `mask='auto'` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—á–∞—Ç–∏
3. **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥—Ä–∞–Ω–∏—Ü
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PNG

---

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ `pdf_processor.py`** 